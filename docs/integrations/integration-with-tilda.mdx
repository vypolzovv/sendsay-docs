---
sidebar_position: 2
description: Как настроить интеграцию и автоматически импортировать данные из форм Tilda в Sendsay.
recent_article:
  new: false
  theses:
    - Рассказали, как добавлять подписчиков из Tilda неподтверждёнными
    - Добавили информацию о том, как избежать ошибки передачи данных из форм
    - Актуализировали настройки при связке формы Sendsay с формой Tilda
---

import tildaLink from '/img/integrations/integration-with-tilda/tilda-link.png';
import howToPublushTildaForm from '/img/integrations/integration-with-tilda/how-to-publish-tilda-form.png';
import additionalSettings from '/img/integrations/integration-with-tilda/additional-settings.jpg';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Details from '@theme/Details';

# Интеграция с Tilda

У сайтов на Tilda есть собственный конструктор для создания форм сбора подписчиков. Данные из таких форм можно автоматически импортировать в Sendsay, сохранять в анкетах и использовать в работе с рассылками.

## Как настроить автоматический импорт данных

В Sendsay можно настроить автоматический импорт данных, которые посетители сайтов на Tilda оставляют в формах. Это можно сделать в пять шагов:

### 1. Создайте интеграцию в Sendsay

1. Перейдите в предыдущий интерфейс [по ссылке](https://sendsay.ru/account/#dashboard), либо откройте меню аккаунта в правом верхнем углу и выберите пункт **Предыдущий интерфейс**.
2. Откройте раздел **Подписчики → Интеграции** и выберите пункт **Tilda**.

   ![How to create integration with Tilda](/img/integrations/integration-with-tilda/how-to-create-integration-with-tilda.gif) <br/>

### 2. Выберите настройки интеграции и получите ссылку

У интеграции всего три настройки:

1. **Список контактов**, куда будут импортироваться данные из формы.<br/>
2. **Режим добавления** устанавливает, каким подписчикам отправлять приветственные письма:

   - «статус New задается, если подписчик добавлен в базу (B)», то есть на все новые адреса,
   - «статус New задается, если подписчик добавлен в базу и/или группу (G)» — только на те адреса, у которых нет совпадений в выбранном списке контактов.<br/>

3. **Шаблон приветственного письма.** После выбора настроек нажмите «Получить ссылку для Tilda» — сервис сгенерирует ссылку, которую нужно добавить на сайт.

   <p align="center">
     <img src={tildaLink} alt="Tilda link" />
   </p>

<Details summary='Как добавлять подписчиков неподтверждёнными'>
Если вы хотите добавлять подписчиков [неподтверждёнными](https://docs.sendsay.ru/subscribers/contacts/how-to-activate-inactive-contacts), то ссылку для интеграции нужно получить через [API-консоль](https://app.sendsay.ru/api/console). Для получения ссылки используйте запрос:
```
{
  "action": "sys.settings.get",
  "list": [
    "integration.tilda"
  ],
  "params": {
    "integration.tilda": {
      "mode": "B",
      "group.id": "код группы",
      "newbie.confirm": 1
    }
  }
}
```
</Details>

### 3. Вставьте ссылку в настройках формы

1. Войдите в аккаунт на Tilda и откройте сайт, откуда вы хотите импортировать подписчиков.
2. Откройте настройки сайта и перейдите в раздел «Формы». В блоке «Другое» выберите пункт Webhook.

   ![Tilda webhook](/img/integrations\integration-with-tilda/tilda-webhook.gif) <br/>

3. Вставьте сгенерированную ссылку и нажмите «Добавить». После этого вам предложат подключить ссылку к формам на сайте:
   - если у вас всего одна форма на сайте, нажмите «Добавить»,
   - если на сайте несколько форм, нажмите «Закрыть» и подключите ссылку к нужной форме вручную. Для этого откройте страницу, где находится блок с формой, нажмите на кнопку «Контент» рядом с формой и отметьте галочкой подключенную ссылку.
4. Нажмите «Сохранить».

   ![Connect Sendsay link to Tilda](/img/integrations\integration-with-tilda/connect-sendsay-link-to-tilda.gif) <br/>

:::tip Важно
Чтобы данные передавались корректно, проверьте, что в дополнительных настройках Webhook в Tilda не активна галочка «Передавать данные по товарам в заказе — массивом».

<p align="center">
  <img src={additionalSettings} alt="Additional settings" />
</p>
:::

### 4. Настройте название формы

Откройте настройки блока с формой — название указывается под шириной и отступом. В названиях полей и формы можно использовать любые символы.

:::tip Важно
Рекомендуем использовать латинские символы, цифры, точки, минусы и знаки подчёркивания. Пробелы, знаки препинания и другие нераспознанные символы в названиях полей и формы система заменит на знаки подчёркивания.
:::

![How to set form name](/img/integrations\integration-with-tilda/how-to-set-form-name.gif) <br/>

В конце заново опубликуйте страницу с формой, чтобы изменения вступили в силу.

<p align="center">
  <img src={howToPublushTildaForm} alt="How to publish Tilda form" />
</p>

### 5. Протестируйте, всё ли работает

Заполните форму на сайте и нажмите «Отправить». Затем в Sendsay откройте список, куда добавляются контакты из формы — там должен появиться ваш адрес.

Другие данные из формы можно посмотреть пока только [в предыдущем интерфейсе](https://sendsay.ru/account/#dashboard) (но мы работаем над тем, чтобы добавить их в новый):

1. Откройте карточку подписчика и перейдите в раздел «Данные».
2. В блоке «Произвольные данные» раскройте секцию tildaforms и найдите блок с названием формы.

   ![How to test Tilda integration](/img/integrations\integration-with-tilda/how-to-test-tilda-integration.gif) <br/>

## Как связать форму Sendsay с формой Tilda

Одну или несколько форм Tilda можно связать с формой Sendsay. Это полезно, если вы хотите:

- использовать заполнение формы как событие в [сценариях](https://docs.sendsay.ru/automations/automation-with-workflows/workflow-creation) или триггерах,
- собирать данные из нескольких форм в одну [анкету](https://docs.sendsay.ru/subscribers/subscriber-data/data-groups),
- подтверждать подписчиков и их данные, отправляя письма подтверждения,
- отслеживать статистику заполнения форм.

Связать формы можно за 4 шага:

### 1. Создайте форму на Tilda

Войдите в аккаунт на Tilda и откройте сайт, на котором будет находиться форма. Создайте блок с формой.

![How to make a tilda form](/img/integrations/integration-with-tilda/how-to-make-a-tilda-form.gif)

Перейдите в настройки формы и задайте название. Рекомендуем использовать латинские символы, цифры, точки, минусы и знаки подчёркивания. Пробелы, знаки препинания и другие нераспознанные символы система заменит на знаки подчёркивания.

![How to create tilda form](/img/integrations/integration-with-tilda/how-to-create-tilda-form.gif)

### 2. Создайте и активируйте форму в Sendsay

В Sendsay создайте новую форму и назовите её в формате: `tilda_<название формы Tilda>`.

![How to create sendsay form](/img/integrations/integration-with-tilda/how-to-create-sendsay-form.gif)

[Как создать форму](https://docs.sendsay.ru/forms/signup-forms/#как-создать-форму)

Поля в форме должны дублировать поля формы Tilda. Для поля с адресом укажите один из вариантов названия: `Email`, `email` или `EMAIL`.

[Как настроить дизайн формы в редакторе](https://docs.sendsay.ru/forms/signup-forms/#как-настроить-дизайн-формы-в-редакторе)

:::tip Важно
Чтобы данные из Tilda сохранялись в поля анкеты, подписчик должен перейти по ссылке из письма подтверждения — так он подтвердит форму Sendsay.
:::

Завершив настройку формы, активируйте её, нажав на кнопку в правом верхнем углу страницы.

### 3. Настройте форму на Tilda

Чтобы данные из Tilda передавались в нужные поля формы Sendsay, необходимо связать их друг с другом. Для этого понадобятся коды полей формы в Sendsay.

Есть два способа получить коды полей формы:

<Tabs>
<TabItem value="key1" label="Через интерфейс" default>

1. Перейдите в предыдущий интерфейс [по ссылке](https://sendsay.ru/account/#dashboard), либо откройте меню аккаунта в правом верхнем углу и выберите пункт **Предыдущий интерфейс**.
2. Откройте нужную анкету в разделе [**Анкеты → Опросы и формы**](https://sendsay.ru/account/#ankets_forms).
3. В каждом поле анкеты указан код поля:

   ![Field if in questionnaire](/img/integrations/integration-with-tilda/field-id-in-questionnaire.png)

</TabItem>
<TabItem value="key2" label="Через API-консоль">

Чтобы узнать коды полей формы, необходимо сначала узнать id анкеты, куда будут сохраняться данные.

Откройте форму и скопируйте её id.

![New form field id](/img/integrations/integration-with-tilda/new-form-field-id.png)

Перейдите в [API-консоль](https://app.sendsay.ru/api) и выполните запрос:

```
{
   "action": "form.get",
   "id": "id формы"
}
```

Скопируйте данные из поля `anketa`, вернувшиеся в ответе.

![New form anketa id](/img/integrations/integration-with-tilda/new-form-anketa-id.png)

Теперь можно узнать коды полей в форме. Для этого выполните в [API-консоли](https://app.sendsay.ru/api) запрос:

```
{
   "action": "anketa.get",
   "id": "id анкеты" //укажите здесь данные из поля anketa, вернувшиеся после предыдущего запроса
}
```

![Api form field id](/img/integrations/integration-with-tilda/api-form-field-id.png)

</TabItem>
</Tabs>

Полученные коды полей формы Sendsay нужно указать в настройках соответствующих полей в Tilda.

Для этого в Tilda перейдите в меню «Контент» формы, откройте вкладку «Поля для ввода» и добавьте id из Sendsay в настройку «Имя переменной» нужного поля.

:::tip Важно
Для поля Email имя переменной указывать не нужно.
:::

![How to insert field id on tilda](/img/integrations/integration-with-tilda/how-to-insert-field-id-on-tilda.gif)

### 4. Получите и активируйте вебхук для формы Tilda

Чтобы завершить настройку передачи данных из форм Tilda, необходимо получить ссылку для [вебхука](https://docs.sendsay.ru/getting-started/glossary/#в) и активировать её в настройках формы.

Чтобы получить ссылку:

1. В [предыдущем интерфейсе](https://sendsay.ru/account/#dashboard) перейдите в раздел [**Подписчики → Интеграции**](https://sendsay.ru/account/#subscribers/integrations) и выберите пункт **Tilda**.
2. [Заполните необходимые](#2-выберите-настройки-интеграции-и-получите-ссылку) параметры и нажмите «Получить ссылку для Tilda».

Для активации вебхука вставьте [полученную ссылку](#3-вставьте-ссылку-в-настройках-формы) в настройках формы Tilda.

**Читайте также:** <br/>
[Как использовать данные из Tilda в рассылках и сегментах](https://docs.sendsay.ru/email-campaigns/personalization/how-to-use-tilda-data-in-campaigns) <br/>
[Формы сбора подписчиков](https://docs.sendsay.ru/forms/signup-forms/) <br/>
[Анкеты и работа с данными](https://docs.sendsay.ru/subscribers/subscriber-data/data-groups/)
