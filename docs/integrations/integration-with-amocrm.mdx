---
sidebar_position: 4
---

import DealData from '/img/integrations/integration-with-amocrm/how-to-add-deal-data.png';
import triggerConditions from '/img/integrations/integration-with-amocrm/trigger-conditions.png';
import conditions from '/img/integrations/integration-with-amocrm/mailing-conditions.png';

# Интеграция с amoCRM

AmoCRM&nbsp;&mdash; это система управления взаимоотношениями с&nbsp;клиентами, которая позволяет автоматизировать работу и&nbsp;продажи внутри компании. Интеграция с&nbsp;Sendsay поможет переносить контакты из&nbsp;amoCRM, настраивать автоматические действия в&nbsp;Цифровой Воронке и&nbsp;смотреть статистику, не&nbsp;выходя из&nbsp;системы.

Чтобы данные передавались из&nbsp;amoCRM в&nbsp;Sendsay, необходимо установить виджет и&nbsp;настроить интеграцию. Для этого:

1. Откройте меню аккаунта и&nbsp;выберите пункт **Настройки системы &rarr; Интеграции**. Затем выберите **Интеграция с&nbsp;AmoCRM** среди доступных и&nbsp;нажмите &laquo;Подключить аккаунт&raquo;:

   ![Integration with amocrm](/img/integrations/integration-with-amocrm/integration-with-amocrm.gif)

   После этого будут сгенерированы данные для подключения&nbsp;&mdash; вашего логина и&nbsp;API-ключа, которые необходимо ввести в&nbsp;аккаунте amoCRM.

   ![Api key](/img/integrations/integration-with-amocrm/api-key.png)

   :::tip Важно
   Сохраните API-ключ в надёжном месте — после закрытия этого окна он останется только у вас. В случае утери API-ключа вы сможете сгенерировать новый, но сброс API-ключа нарушит работу интеграции с amoCRM, если она уже настроена.
   :::

2. Перейдите [по прямой ссылке](https://www.amocrm.ru/oauth/?state=state&mode=popup&client_id=085a62f3-2f20-4a14-aa98-713c898d96ca), авторизуйтесь в amoCRM и выберите нужный аккаунт, затем нажмите «Разрешить» — чтобы предоставить доступ и установить виджет интеграции:

   ![Widget acces](/img/integrations/integration-with-amocrm/widget-access.png)

   После того как попадёте на страницу установленного виджета, переходите к п. 3.

   Другой вариант установки: вы можете перейти в раздел **amoМаркет &rarr; Маркетплейс** в своём аккаунте amoCRM и найти виджет Sendsay с&nbsp;помощью строки поиска.

   Нажмите &laquo;Установить бесплатно&raquo;. Затем отметьте галочкой согласие на передачу персональных данных и&nbsp;нажмите &laquo;Установить&raquo;.

   ![Widget Sendsay](/img/integrations/integration-with-amocrm/widget-sendsay.gif)

3. После установки необходимо подключить виджет — для этого cкопируйте данные для входа из&nbsp;Sendsay и&nbsp;введите их&nbsp;во&nbsp;вкладке **Авторизация**. Затем нажмите &laquo;Сохранить&raquo;.

   ![Authorization](/img/integrations/integration-with-amocrm/authorization.png)

4. Перейдите во&nbsp;вкладку **Пользователи** и&nbsp;отметьте галочкой пользователей аккаунта, которые будут работать с&nbsp;виджетом:

   ![Users](/img/integrations/integration-with-amocrm/users.png)

   Нажмите «Сохранить».

5. После установки виджета перейдите в **Настройки → Sendsay** и нажмите «Сохранить», даже если не планируете передавать ничего, кроме email-адресов:

   ![Settings](/img/integrations/integration-with-amocrm/amo-settings.png)

В базе знаний также есть видеоурок [Интеграция с amoCRM](https://docs.sendsay.ru/videolessons/automations/integration-with-amocrm).

## Как настроить импорт данных

При импорте данных в&nbsp;Sendsay система передаёт имя Контакта или Компании и&nbsp;основной email. Однако вы&nbsp;можете настроить нужные поля для передачи данных&nbsp;&mdash; для этого в&nbsp;amoCRM перейдите в&nbsp;раздел **Настройки &rarr; Sendsay**.

![Widget settings](/img/integrations/integration-with-amocrm/widget-settings.png)

На&nbsp;этой странице указаны поля, которые можно передавать в&nbsp;Sendsay:

- поля Контакта,
- поля Компании,
- поля Сделки.

Для каждого из&nbsp;трёх типов полей есть раскрывающийся список&nbsp;&mdash; откройте его и&nbsp;укажите, какие именно поля будут передаваться в&nbsp;Sendsay. Затем нажмите &laquo;Сохранить&raquo;.

:::tip Важно
После создания нового поля в&nbsp;amoCRM необходимо подождать 15&nbsp;минут, прежде чем передавать его в&nbsp;Sendsay: системе потребуется время на&nbsp;сохранение поля.
:::

![How to set fields](/img/integrations/integration-with-amocrm/how-to-set-fields.gif)

Система может автоматически передавать обновленные данные из&nbsp;полей Контакта и&nbsp;Компании при их&nbsp;изменении вручную из&nbsp;карточек Контакта и&nbsp;Компании. Для этого отметьте соответствующий пункт галочкой и&nbsp;нажмите &laquo;Сохранить&raquo;:

![Field changes](/img/integrations/integration-with-amocrm/field-changes.png)

:::tip Важно
При изменении данных в&nbsp;поле Сделки информация не&nbsp;будет передаваться автоматически. Чтобы после изменений обновить данные о&nbsp;Сделке в&nbsp;Sendsay, необходимо перейти в&nbsp;её&nbsp;карточку и&nbsp;повторно передать данные с&nbsp;помощью виджета в&nbsp;правой части экрана.
:::

Есть четыре способа, как передать данные из&nbsp;amoCRM в&nbsp;Sendsay:

- [импортировать базу Контактов или&nbsp;Компаний массово](#как-импортировать-базу-контактов-иликомпаний-массово);
- [импортировать все данные Сделок массово](#как-импортировать-данные-сделок);
- [вручную импортировать данные каждого контакта Сделки с&nbsp;помощью виджета](#как-вручную-импортировать-контакты)&nbsp;&mdash; этот вариант понадобится, если при передаче данных необходимо добавить Контакты в&nbsp;разные списки и&nbsp;сценарии;
- [настроить импорт в&nbsp;Цифровой Воронке при срабатывании триггера](#как-настроить-автоматизации-вцифровой-воронке).

## Как импортировать базу Контактов или&nbsp;Компаний массово

Компании импортируются в&nbsp;Sendsay так&nbsp;же, как и&nbsp;Контакты&nbsp;&mdash; для каждой Компании создаётся своя карточка подписчика. После передачи данных Контакт и&nbsp;информация о&nbsp;Сделке станут доступны в&nbsp;Sendsay в&nbsp;разделе **Подписчики &rarr; Просмотр подписчиков**.

Чтобы импортировать Контакты или Компании:

1. В&nbsp;amoCRM перейдите в&nbsp;раздел **Списки** и&nbsp;в&nbsp;раскрывающемся меню выберите нужный список для импорта — Контакты или Компании соответственно. Обратите внимание: из списка **Все контакты и компании** импортировать данные не получится.

2. Отфильтруйте список по&nbsp;необходимым параметрам, либо отметьте галочкой нужные Контакты или Компании.

   При выборе всех Контактов в&nbsp;появившемся меню нажмите &laquo;Ещё&raquo; и&nbsp;выберите Sendsay. Затем в&nbsp;появившемся окне необходимо указать, хотите&nbsp;ли вы&nbsp;экспортировать только отмеченные Контакты, или все Контакты по&nbsp;активному фильтру.

   ![How to import contacts](/img/integrations/integration-with-amocrm/how-to-import-contacts.gif)

3. В&nbsp;появившемся окне во&nbsp;вкладке **Добавление** при необходимости выберите списки и&nbsp;активные сценарии, куда импортировать контакты. Затем нажмите &laquo;Добавить&raquo;.

   ![How to add to the list and workflow](/img/integrations/integration-with-amocrm/how-to-add-to-the-list-and-workflow.gif)

:::tip Важно
Не&nbsp;рекомендуем импортировать контакты повторно до&nbsp;того, как завершится предыдущий импорт. Дождитесь, пока все контакты будут импортированы в&nbsp;Sendsay — и&nbsp;только потом импортируйте их&nbsp;снова.
:::

Чтобы посмотреть данные Контакта или Компании, в&nbsp;Sendsay перейдите в&nbsp;карточку подписчика и&nbsp;выберите вкладку **Данные &rarr; Данные из&nbsp;amoCRM**, где содержится информация о&nbsp;Контакте и&nbsp;Сделках, в&nbsp;которых он&nbsp;участвует:

![Subscriber data](/img/integrations/integration-with-amocrm/subscriber-data.png)

### Как исключить Контакты и&nbsp;Компании из&nbsp;списков и&nbsp;сценариев

1. В&nbsp;amoCRM перейдите в&nbsp;раздел **Списки** и&nbsp;в&nbsp;раскрывающемся меню выберите нужный список среди Контактов или Компаний.
2. Отметьте галочкой нужные Контакты или Компани. В&nbsp;появившемся меню нажмите &laquo;Ещё&raquo; и&nbsp;выберите Sendsay.
3. В&nbsp;новом окне выберите вкладку **Исключение**, затем укажите списки и&nbsp;сценарии рассылок, из&nbsp;которых необходимо исключить Контакты, участвующие в&nbsp;сделке.
4. Нажмите &laquo;Исключить&raquo; и подтвердите действие.

   ![How to delist or workflow](/img/integrations/integration-with-amocrm/how-to-delist-or-workflow.gif)

## Как импортировать данные Сделок

При импорте Сделок в&nbsp;Sendsay создаются карточки подписчиков для каждого Контакта и&nbsp;Компании, участвующих в&nbsp;сделке.

Чтобы массово импортировать Сделки:

1. Перейдите в&nbsp;раздел **Сделки** и&nbsp;выберите отображение списком.

2. Отфильтруйте список Сделок по&nbsp;необходимым параметрам, либо отметьте галочкой нужные Сделки.

3. При выборе всех Сделок в&nbsp;появившемся меню нажмите &laquo;Ещё&raquo; и&nbsp;выберите Sendsay. Затем в&nbsp;появившемся окне необходимо указать, хотите&nbsp;ли вы&nbsp;экспортировать только отмеченные Сделки, или все Сделки по&nbsp;активному фильтру.

4. В&nbsp;появившемся окне во&nbsp;вкладке **Добавление** при необходимости выберите списки и&nbsp;активные сценарии рассылок, куда импортировать Контакты и&nbsp;Компании, участвующие в&nbsp;Сделках. Здесь есть три варианта:

   - добавить в&nbsp;список или активный сценарий основной Контакт,
   - добавить в&nbsp;список или активный сценарий дополнительные Контакты,
   - добавить в&nbsp;список или активный сценарий Компанию.
     <p align="center">
       <img src={DealData} alt="How to add deal data" />
     </p>

   Отметьте галочкой необходимый вариант или сразу несколько&nbsp;&mdash; в&nbsp;случае, если необходимо передать в&nbsp;выбранный список или сценарий всех участников текущей Сделки. Затем нажмите &laquo;Добавить&raquo;.

:::tip Важно
Система создаст такое&nbsp;же количество подписчиков в&nbsp;Sendsay, сколько Контактов и&nbsp;Компаний по&nbsp;каждой Сделке было импортировано. Например, если в&nbsp;одной Сделке участвует 4&nbsp;Контакта и&nbsp;1&nbsp;Компания,&nbsp;&mdash; и&nbsp;вы&nbsp;импортировали каждый адрес, тогда в&nbsp;системе появится 5&nbsp;карточек подписчиков.
:::

### Как исключить участвующие в&nbsp;Сделках Контакты и&nbsp;Компании из&nbsp;списков и&nbsp;сценариев

Например, сделка завершилась&nbsp;&mdash; и&nbsp;теперь вам нужно исключить Контакты из&nbsp;выбранного ранее списка. Тогда:

1. В&nbsp;amoCRM перейдите в&nbsp;раздел **Сделки** и&nbsp;выберите отображение списком.
2. Отметьте галочкой нужные (или все сразу) Сделки. В&nbsp;появившемся меню нажмите &laquo;Ещё&raquo; и&nbsp;выберите Sendsay.
3. В&nbsp;новом окне выберите вкладку **Исключение**, затем укажите списки и&nbsp;сценарии рассылок, из&nbsp;которых необходимо исключить Контакты или Компании, участвующие в&nbsp;Сделке.
4. Отметьте галочками необходимые опции:
   - исключить основной Контакт,
   - исключить дополнительные Контакты,
   - исключить Компанию.

Выберите один вариант или сразу несколько, затем нажмите &laquo;Исключить&raquo;.

## Как вручную импортировать Контакты

Каждый Контакт в&nbsp;amoCRM можно импортировать в&nbsp;Sendsay вручную. Для этого:

1. Перейдите в&nbsp;раздел **Сделки** и&nbsp;откройте карточку нужной Сделки, затем раскройте меню справа и&nbsp;выберите виджет Sendsay&nbsp;&mdash; здесь отображается основной Контакт, участвующий в&nbsp;текущей Сделке.

   ![How to import contacts manually](/img/integrations/integration-with-amocrm/how-to-import-contacts-manually.png)

   Чтобы импортировать Компанию и&nbsp;все Контакты, участвующие в&nbsp;Сделке, в&nbsp;виджете Sendsay отметьте галочкой пункт **Все контакты и&nbsp;компания**.

2. При необходимости выберите списки и&nbsp;активные сценарии, куда импортировать Контакты и&nbsp;Компании.

   ![How to import contacts manually](/img/integrations/integration-with-amocrm/how-to-import-contacts-manually1.png)

3. Выберите нужные Контакты и&nbsp;нажмите &laquo;Добавить&raquo;.

Виджет Sendsay позволяет также исключить Контакт из&nbsp;выбранного списка или активного сценария в&nbsp;интерфейсе amoCRM, если ранее он&nbsp;был туда добавлен. Чтобы это сделать, укажите списки и&nbsp;сценарии во&nbsp;вкладке **Исключение**.

:::tip Важно
Вкладка **Исключение** относится только к&nbsp;удалению Контакта из&nbsp;списков и&nbsp;активных сценариев. Удалить Контакт из&nbsp;базы можно только в&nbsp;интерфейсе Sendsay.
:::

## Как настроить автоматизации в&nbsp;Цифровой Воронке

С&nbsp;виджетом Sendsay вы&nbsp;можете настраивать автоматические действия в&nbsp;Цифровой Воронке&nbsp;&mdash; например, добавлять Контакты в&nbsp;сценарий или исключать из&nbsp;списков при переходе на&nbsp;следующий этап Cделки. Для этого:

1. В&nbsp;amoCRM перейдите в&nbsp;раздел **Сделки** и&nbsp;нажмите &laquo;Настроить&raquo; в&nbsp;правом верхнем углу.

2. Выберите необходимый этап Цифровой Воронки и&nbsp;нажмите &laquo;Добавить триггер&raquo;. В&nbsp;новом окне через поиск найдите виджет Sendsay и&nbsp;нажмите &laquo;Добавить&raquo;.

   ![Digital funnel](/img/integrations/integration-with-amocrm/digital-funnel.gif)

3. Добавьте условия для Сделок и&nbsp;триггер amoCRM. Например, если вы&nbsp;хотите, чтобы Контакты и&nbsp;Компании, участвующие в&nbsp;Сделках с&nbsp;бюджетом от&nbsp;10&nbsp;000 до&nbsp;50&nbsp;000&nbsp;рублей, попадали в&nbsp;список или сценарий при оплате счёта, условия будут выглядеть так:

<p align="center">
  <img width="70%" src={triggerConditions} alt="Trigger conditions" />
</p>

4. При необходимости укажите списки и&nbsp;сценарии в&nbsp;Sendsay, в&nbsp;которые нужно добавить или исключить контакты после срабатывания триггера на&nbsp;стороне amoCRM. Отметьте галочками необходимые опции&nbsp;&mdash; выберите один вариант или сразу несколько:

   - применить только к&nbsp;основному Контакту,
   - применить только к&nbsp;дополнительным Контактам,
   - применить только к&nbsp;Компании.

   Нажмите «Готово».

5. После настройки триггерных событий нажмите &laquo;Сохранить&raquo; в&nbsp;Цифровой Воронке.

## Как запустить авторассылку из amoCRM

Виджет Sendsay позволяет отправлять автоматические рассылки при выполнении заданных условий в amoCRM — например, когда Сделка переходит на новый этап.

:::tip Важно
Вы можете настраивать триггерные сценарии без ограничений, если используете тариф линейки «Маркетинг». На тарифах линейки «Рассылки» есть ограничение до 5 активных триггеров.
:::

1. В Sendsay перейдите в раздел **Контент** и создайте шаблон письма для отправки. Заполните имя отправителя, его адрес и тему письма.

   [Как создать письмо в блочном редакторе](https://docs.sendsay.ru/email-campaigns/create-your-campaign/drag-and-drop-editor)<br/>
   [Как загрузить HTML-шаблон](https://docs.sendsay.ru/email-campaigns/create-your-campaign/how-to-upload-html-template)

2. Перейдите в раздел **Автоматизации → Сценарии** и создайте новый сценарий.

   В качестве [стартового события](https://docs.sendsay.ru/automations/automation-with-workflows/workflow-blocks/#стартовые-события) выберите **Без стартового события**. Следующим блоком выберите действие **Отправить подписчику email** и укажите шаблон письма, который вы создали в п. 1.

   Нажмите «Сохранить». На странице сценария включите приём подписчиков и повторные прохождения, затем активируйте сценарий — иначе он не отобразится в amoCRM.

   ![Workflow creation](/img/integrations/integration-with-amocrm/workflow-creation.gif)

   [Гайд по работе со сценариями](https://docs.sendsay.ru/automations/automation-with-workflows/workflow-guide)

3. Перейдите в amoCRM. В разделе **Сделки → Воронка** нажмите «Настроить», выберите нужный этап воронки и нажмите «Добавить триггер».

   Затем в появившемся окне с помощью поиска найдите виджет Sendsay и нажмите «+ Добавить».

   ![How to add widget](/img/integrations/integration-with-amocrm/how-to-add-widget.gif)

4. Настройте условия для триггера: например, **После перехода или создания в этапе**. Затем в поле **Добавить на сценарий рассылки** укажите сценарий, который вы создали в п. 2.

   <p align="center">
     <img width="50%" src={conditions} alt="Trigger conditions" />
   </p>

   При необходимости отметьте галочкой нужные параметры:

   - применить к основному контакту,
   - применить к дополнительным контактам,
   - применить к компании,
   - применить триггер к текущим сделкам в статусе.

   Нажмите «Готово», затем сохраните настройки в Цифровой Воронке.

   Таким образом после срабатывания триггера в amoCRM, в Sendsay запустится сценарий для этого контакта и он получит письмо.

   [Как персонализировать рассылку на основе данных из amoCRM](https://docs.sendsay.ru/email-campaigns/personalization/how-to-use-amocrm-data-in-campaigns/#как-персонализировать-рассылку-наоснове-данных-контактов-икомпаний)

## Отчёт по&nbsp;рассылкам в&nbsp;amoCRM

Виджет Sendsay позволяет посмотреть статистику по&nbsp;отправленным выпускам для каждого контакта в&nbsp;amoCRM. Это может понадобиться, например, для понимания того, насколько контакт вовлечён в&nbsp;коммуникацию по&nbsp;Cделке.

Как это сделать:

1. В&nbsp;amoCRM перейдите в&nbsp;раздел **Списки &rarr; Контакты** и&nbsp;выберите необходимый контакт. Либо кликните по&nbsp;нужному контакту прямо в&nbsp;карточке Сделки.

2. В&nbsp;меню справа выберите виджет Sendsay и&nbsp;нажмите &laquo;Отчёт по&nbsp;рассылкам&raquo;.

![How to view statistics](/img/integrations/integration-with-amocrm/how-to-view-statistics.png)

Система отображает отчёт по рассылкам за последние 14 дней. Если хотите посмотреть отправленные выпуски за более ранний период, нажмите «Ещe»:

![Mailing list report](/img/integrations/integration-with-amocrm/mailing-list-report.gif)

Данные по&nbsp;выпускам также доступны в&nbsp;разделе **Подписчики &rarr; Просмотр подписчиков** в&nbsp;Sendsay: откройте карточку нужного подписчика и&nbsp;перейдите во&nbsp;вкладку **Выпуски**.

**Читайте также:**<br/>
[Интеграция с amoCRM (видеоурок)](https://docs.sendsay.ru/videolessons/automations/integration-with-amocrm)<br/>
[Как использовать данные из amoCRM в рассылках](https://docs.sendsay.ru/email-campaigns/personalization/how-to-use-amocrm-data-in-campaigns)
