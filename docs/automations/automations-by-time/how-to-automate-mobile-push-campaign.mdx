---
sidebar_position: 4
sidebar_label: 'Автоматизация мобильных пушей'
description: 'Как настроить отправку Mobile Push по расписанию'
---

import Details from '@theme/Details';
import automationParameters from '/img/automations/automations-by-time/how-to-automate-mobile-push-campaign/automation-parameters.png';

# Как автоматизировать отправку Mobile Push уведомлений

Для автоматизации мобильных пуш-уведомлений необходимо настроить отправку рассылки по расписанию — чтобы система отправляла уведомления по выбранному шаблону в указанное время.

Для этого перейдите в раздел **[Автоматизации → По времени](https://app.sendsay.ru/automation/crons)** и нажмите «Создать автоматизацию», затем выберите **Автоматизация Mobile Push**. Настройка автоматизации выполняется за 6 шагов:

## 1. Выберите получателей рассылки

На шаге **Аудитория** укажите нужный список или сегмент получателей типа **Mobile Push**:

![Subscribers](/img/automations/automations-by-time/how-to-automate-mobile-push-campaign/subscribers.png)

:::tip Важно
При выборе типа **Email** или **SMS** система отберёт в список получателей все контакты типа Mobile Push из базы, которые соответствуют условиям сегмента. Тип сегмента при этом не будет учитываться.

Например, при отправке Mobile Push выпуска по email-сегменту система найдёт в вашей базе все контакты типа Mobile Push (но не контакты типа Email), затем выберет из них те, которые подходят по условия сегмента, — и отправит по ним рассылку.
:::

При необходимости ограничьте аудиторию, настроив дополнительные фильтры: например, вы можете отправить рассылку только части пользователей приложения.

## 2. Подготовьте шаблон

На шаге **Содержимое** выберите готовый шаблон сообщения, либо создайте уведомления с нуля, используя:

- **заголовок** — до 120 символов,
- **сообщение** — до 290 символов,
- **изображение** — файл до 1 МБ, рекомендуемые форматы — PNG, JPEG или GIF.

<Details summary='Ограничение символов'>

Одно и то же уведомление будет выглядеть у подписчиков по-разному, так как внешний вид мобильного пуша и длина самого сообщения зависит от операционной системы устройства и размера экрана.

Поэтому лучше не выходить за рамки **40 символов для заголовка и 80 символов для текста уведомления** — так пользователи приложения смогут просматривать содержимое мобильного пуша на разных устройствах.

Читайте также:<br/>
[Документация Android](https://developer.android.com/media/platform/supported-formats)<br/>
[Документация Apple](https://developer.apple.com/design/human-interface-guidelines/managing-notifications)

</Details>

Чтобы убедиться, что уведомление выглядит именно так, как вы предполагаете, [протестируйте отправку](https://docs.sendsay.ru/other-channels/mobile-push/how-to-create-mobile-push-campaign#3-протестируйте-рассылку-опционально) рассылки (опционально).

## 3. Настройте расписание

Выберите периодичность и время отправки:

- если рассылка должна уходить **ежедневно**, укажите время,
- если рассылка должна уходить **еженедельно**, укажите дни недели и время,
- если рассылка должна уходить **ежемесячно**, укажите число месяца и время отправки.

Вы можете выбрать несколько дней и несколько вариантов времени отправки. Например:

<p align="center">
  <img width="70%" src={automationParameters} alt="Automation parameters" />
</p>

Так мобильное уведомление будет отправляться четыре раза в неделю — каждый вторник и четверг в 10:30 и в 18:30. При необходимости настройте ограничение расписания.

## 4. Подключите дополнительные настройки (опционально)

:::tip Важно
Для работы с дополнительными настройками необходимы навыки работы с мобильными приложениями. Чтобы настроить поведение приложения при нажатии на уведомление, обратитесь к разработчику вашего мобильного приложения.
:::

При необходимости укажите **Дополнительные настройки**:

- **Отправьте приложению дополнительные данные**. Укажите содержимое `data` в формате ключ-значение.

- **Количество попыток отправки уведомления**. Настройте количество попыток отправки уведомления в случае сбоя сервиса. По умолчанию будет совершена 1 попытка, максимальное количество попыток — 5.

- **Вызвать ссылку при нажатии на уведомление**. Укажите параметры, которые добавятся в содержимое `data`:
  - `action` — тип ссылки `app`, `browser` или `deeplink`,
  - `url` — адрес ссылки.<br/><br/>
    Для корректной работы этой настройки необходимо настроить поведение приложения после нажатия на уведомление с указанными данными.

Настройки, которые сработают только для уведомлений, отправленных через Firebase:

- **Действие после нажатия на уведомление**. Укажите действие с соответствующим `intent_filter` — оно запустится после того, как пользователь нажмёт на уведомление.

- **Срок доставки уведомления**. Настройте время попыток доставки сообщения, пока устройство подписчика не подключено к интернету. После истечения этого срока, доставка будет отменена. По умолчанию установлено максимальное значение для FCM — 2 419 000 секунд (28 дней). Настройка полезна для проведения акций с ограниченным сроком действия.

- **Эмулировать отправку уведомлений**. При эмулировании сервис пуш-уведомлений получит запрос на отправку уведомления, но конечным пользователям сообщение не отправит. Сработает **только** для отправки через Firebase.

## 5. Выберите тип отправки

На шаге **Настройки отправки** укажите, как будет отправляться уведомление:

- **Без дополнительных настроек**,
- **Отправить по часовым поясам** — выпуск отправится каждому пользователю в его часовом поясе. Если часовой пояс в анкете подписчика не указан, рассылка отправиться по московскому времени.

## 6. Активируйте автоматизацию

После завершения настройки нажмите «Активировать». Вы можете сразу активировать автоматизацию, отложить запуск или указать интервал, когда автоматизация будет работать.
