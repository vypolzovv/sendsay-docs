---
sidebar_position: 2
sidebar_label: 'Брошенный просмотр'
description: Письмо напоминает о последних просмотренных товарах и помогает вернуть подписчика на сайт.
---

import Details from '@theme/Details';
import SupportLink from '@site/src/components/SupportLink';

# Брошенный просмотр

Брошенный просмотр — это механика автоматической коммуникации с подписчиками, которая помогает вернуть клиентов на сайт для оформления заказа. Письма о брошенном просмотре напоминают пользователям о товарах, которые они просматривали на сайте.

:::note Как это работает
_Пользователь посмотрел карточку товара, но не оформил заказ → в систему поступает событие Просмотр карточки товара → событие запускает автоматический сценарий → сценарий отправляет письмо с напоминанием о брошенном просмотре товара спустя 30 минут (или другое указанное время)_

При этом сценарий автоматически прервётся, если пользователь оформит заказ.
:::

Такие письма помогают вести клиентов по воронке продаж. Если посетитель сайта просматривал какой-то товар, вероятно, он в нём заинтересован. Поэтому задача писем о брошенном просмотре — вернуть подписчика на сайт и подтолкнуть к покупке. В письмах можно закрыть возможные возражения: например, рассказать о пользе товара, способах оплаты, условиях доставки и возврата, предложить скидку.

Для запуска сценария **Брошенный просмотр** необходимо:

1. В разделе **Продажи** [подключить сайт онлайн-магазина](https://docs.sendsay.ru/ecom/how-to-connect-ecom/#как-подключить-сайт-кмодулю).
2. [Установить на сайт скрипт отслеживания](https://docs.sendsay.ru/ecom/how-to-connect-ecom/#2-настройте-передачу-данных-ссайта-вsendsay).
3. Настроить передачу событий [_Просмотр карточки товара_](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#просмотр-карточки-товара) и [_Заказ_](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#действия-с-заказом).
4. [Подключить сценарий](#как-подключить-сценарий) в разделе **Продажи → Сценарии**.
5. Отредактировать шаблон письма и настроить время задержки отправки.
6. Активировать сценарий.

Пользователь не попадёт в сценарий, если в течение 24 часов до наступления события _Просмотр карточки товара_ он уже проходил какой-либо сценарий раздела **Продажи** или совершил заказ. При необходимости можно настроить дополнительные условия недопуска пользователей в сценарий: например, если данные клиента не соответствуют каким-либо условиям (допустим, физическое лицо может проходить сценарий, а юридическое лицо — нет). Чтобы настроить дополнительные условия, <SupportLink>напишите в чат поддержки</SupportLink>.

:::tip Важно
Для настройки передачи событий необходимы навыки программирования. Обратитесь к разработчику вашего сайта, если не обладаете такими навыками.
:::

<Details summary='Настройка передачи событий'>

Настройка передачи события _Просмотр карточки товара_ — обязательный шаг для запуска сценария **Брошенный просмотр**. Это событие наступает при посещении пользователем страницы с описанием товара (услуги) или при открытии окошка «быстрый просмотр товара».

Рекомендуемые параметры в событии:

| Имя         |      Описание      |  Тип данных   |                             Комментарий                              |
| :---------- | :----------------: | :-----------: | :------------------------------------------------------------------: |
| id          |     id товара      |    String     |                             обязательно                              |
| name        |  название товара   |    String     |                            рекомендуется                             |
| category    | название категории |    String     |                            рекомендуется                             |
| category_id |    id категории    |     Int64     |            рекомендуется для подборки популярных товаров             |
| price       |        цена        | Decimal64(2)  |                                                                      |
| old_price   |    старая цена     | Decimal64(2)  |                                                                      |
| picture     |      картинка      | Array(String) |                          абсолютная ссылка                           |
| url         |  ссылка на товар   |    String     |                          абсолютная ссылка                           |
| cp1…cp20    | произвольное поле  |    String     | для дополнительных параметров товара (например, цвет, размер и т.п.) |

Полный перечень возможных параметров и тип данных указан в [инструкции](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#набор-доступных-полей).

Для отображения товаров в письме рекомендуем все необходимые параметры товара передавать в событии, чтобы в будущем использовать эти данные при персонализации и сегментации. Сведения о товарах также можно выводить в письмо из [товарного каталога](https://docs.sendsay.ru/ecom/product-catalog/). Для корректного отображения товаров из каталога в письмах важно, чтобы id товара в событии совпадал с id в YML-файле каталога товаров.

Проверить поступление событий в систему можно в разделе **Продажи → Просмотр событий** с фильтрацией по нужному событию.

[Инструкция по настройке события просмотра товара](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#просмотр-карточки-товара).

Настройка передачи события _Заказ_ необходима для остановки сценария: если пользователь оформит заказ, сценарий брошенного просмотра прервётся, и клиент не будет получать письма с напоминанием о просмотренных товарах.

Рекомендуемые поля в событии:

| Имя                |                                                     Описание                                                     |  Тип данных  |               Комментарий               |
| :----------------- | :--------------------------------------------------------------------------------------------------------------: | :----------: | :-------------------------------------: |
| transaction_id     |                                                    id заказа                                                     |    String    |               обязательно               |
| transaction_status | статус заказа ([возможные статусы](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#статусы-заказа)) |    Int64     |               обязательно               |
| transaction_dt     |                                              дата оформления заказа                                              |   DateTime   |               обязательно               |
| transaction_sum    |                                                   сумма заказа                                                   | Decimal64(2) |               обязательно               |
| items              |                                                  состав заказа                                                   |    Array     |                                         |
| id                 |                                                    id товара                                                     |    String    |               обязательно               |
| qnt                |                                                    количество                                                    |    Int64     |               обязательно               |
| price              |                                                       цена                                                       | Decimal64(2) |               обязательно               |
| name               |                                                 название товара                                                  |    String    |                                         |
| category           |                                                название категории                                                |    String    |                                         |
| category_id        |                                                   id категории                                                   |    Int64     | рекомендуется для товарных рекомендаций |
| vendor             |                                                  производитель                                                   |    String    |                                         |
| cp1…cp20           |                                                произвольное поле                                                 |    String    |  для дополнительных параметров товара   |

Полный перечень возможных параметров и тип данных указан в [инструкции](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#набор-доступных-полей).

Все заказы будут храниться в базе и доступны в [карточке подписчика](https://docs.sendsay.ru/ecom/ecom-triggers/#как-посмотреть-историю-событий-для-конкретного-подписчика):

![Order](/img/automations/triggers/abandoned-cart/order.png)

[Инструкция по настройке события Заказ](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#действия-с-заказом)

</Details>

## Как подключить сценарий

В Sendsay есть готовый сценарий для отправки писем о брошенном просмотре с предустановленной логикой и готовыми шаблонами писем. Чтобы его подключить:

1. Перейдите в раздел **Продажи → Сценарии**, выберите сценарий **Брошенный просмотр** и нажмите «Подключить».
2. Нажмите «Просмотр» и откройте сценарий. Перейдите во вкладку **Настройки**.
3. На шаге **Письмо 1** нажмите «Редактировать» и [отредактируйте шаблон письма](https://docs.sendsay.ru/ecom/ecom-triggers/#1-отредактируйте-письмо).
4. [Протестируйте отображение товаров](https://docs.sendsay.ru/ecom/ecom-triggers/#2-посмотрите-письмо-подставив-данные-подписчика) в письме с помощью email-адреса подписчика, который просматривал товары.
5. На шаге **Время** [укажите время задержки](https://docs.sendsay.ru/ecom/ecom-triggers/#3-настройте-время-задержки-отправки) отправки.
6. [Активируйте](https://docs.sendsay.ru/ecom/ecom-triggers/#как-активировать-сценарий) сценарий.

Ничего дополнительно настраивать не нужно — вам необходимо только подготовить дизайн писем. Вы можете использовать готовый шаблон письма, где уже настроен автоматический вывод товаров. Шаблоны писем и товарных блоков доступны в разделе **Контент → Название сайта** после подключения сценария. Также вы можете использовать свой шаблон письма: для этого [добавьте в вёрстку правила вывода товаров](https://docs.sendsay.ru/ecom/ecom-proscript/#брошенный-просмотр).

Чтобы стимулировать покупку, расскажите в письме об ограниченном количестве товара или предложите какой-то бонус: например, бесплатную доставку или персональный промокод. Ограниченное по времени предложение сработает на эффект срочности. Добавьте призыв к действию, отражающий суть письма и его цель: обычно это кнопка для перехода в карточку товара.

Если вам нужна помощь с настройкой сценария, <SupportLink>напишите в чат поддержки</SupportLink>: наша команда поможет с настройкой событий и тестированием сценариев, а также с запуском необходимых механик.
