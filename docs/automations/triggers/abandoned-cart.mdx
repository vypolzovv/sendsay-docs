---
sidebar_position: 1
sidebar_label: 'Брошенная корзина'
description: Письма напоминают о «забытых» в корзине товарах и помогают вернуть подписчика на сайт.
---

import Details from '@theme/Details';
import SupportLink from '@site/src/components/SupportLink';

# Брошенная корзина

Брошенная корзина — это механика автоматической коммуникации с подписчиками. Письма о брошенной корзине напоминают пользователям о «забытых» в корзине товарах и помогают вернуть клиентов на сайт для завершения заказа.

:::note Как это работает
_Пользователь добавил товар в корзину, но не оформил заказ → в систему поступает событие Обновление корзины → событие запускает автоматический сценарий → сценарий отправляет письмо с напоминанием о брошенной корзине спустя 30 минут (или другое указанное время)_<br/><br/>
При этом сценарий автоматически прервётся, если пользователь оформит заказ или очистит корзину.
:::

Такие письма помогают вести клиентов по воронке продаж. Если посетитель сайта что-то оставил в корзине, вероятно, он заинтересован в этих товарах. Поэтому задача писем о брошенной корзине — вернуть подписчика на сайт и подтолкнуть к покупке. В письмах можно закрыть возможные возражения: например, рассказать о пользе товара, способах оплаты, условиях доставки и возврата, предложить скидку.

Для запуска сценария **Брошенная корзина** необходимо:

1. В разделе **Продажи** [подключить сайт онлайн-магазина](https://docs.sendsay.ru/ecom/how-to-connect-ecom/#как-подключить-сайт-кмодулю).
2. [Установить на сайт скрипт отслеживания](https://docs.sendsay.ru/ecom/how-to-connect-ecom/#2-настройте-передачу-данных-ссайта-вsendsay).
3. Настроить передачу событий [_Обновление корзины_](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#обновление-корзины), [_Очистка корзины_](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#очистка-корзины) и [_Заказ_](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#действия-с-заказом).
4. [Подключить сценарий](#как-подключить-сценарий) в разделе **Продажи → Сценарии**.
5. Отредактировать шаблоны писем и настроить время задержки отправки.
6. Активировать сценарий.

Пользователь не попадёт в сценарий, если он уже совершил заказ в течение 24 часов до наступления события _Обновление корзины_. При необходимости можно настроить дополнительные условия недопуска в сценарий: например, если подписчик уже проходил любой другой сценарий в этот день, или его данные не соответствуют каким-либо условиям (допустим, физическое лицо может проходить сценарий, а юридическое лицо — нет). Чтобы настроить дополнительные условия, <SupportLink>напишите в чат поддержки</SupportLink>.

:::tip Важно
Для настройки передачи событий необходимы навыки программирования. Обратитесь к разработчику вашего сайта, если не обладаете такими навыками.
:::

<Details summary='Настройка передачи событий'>

Настройка передачи событий корзины — обязательный шаг для запуска сценария **Брошенная корзина**. Событие _Обновление корзины_ нужно передавать во всех точках сайта, где пользователь может взаимодействовать с корзиной (изменение количества товара, удаление, очистка корзины). Для каждого сайта набор таких точек будет индивидуальный.

Рекомендуемые параметры в событии:

| Имя         |      Описание      |  Тип данных   |                             Комментарий                              |
| :---------- | :----------------: | :-----------: | :------------------------------------------------------------------: |
| id          |     id товара      |    String     |                             обязательно                              |
| qnt         |     количество     |     Int64     |                             обязательно                              |
| price       |        цена        | Decimal64(2)  |                             обязательно                              |
| old_price   |    старая цена     | Decimal64(2)  |                                                                      |
| name        |  название товара   |    String     |                                                                      |
| category    | название категории |    String     |                                                                      |
| category_id |    id категории    |     Int64     |                                                                      |
| picture     |      картинка      | Array(String) |                      массив, абсолютная ссылка                       |
| url         |  ссылка на товар   |    String     |                          абсолютная ссылка                           |
| cp1…cp20    | произвольное поле  |    String     | для дополнительных параметров товара (например, цвет, размер и т.п.) |

Полный перечень возможных параметров и тип данных указан в [инструкции](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#набор-доступных-полей).

Для отображения товаров в письме рекомендуем все необходимые параметры товара передавать в событии, чтобы в будущем использовать эти данные при персонализации и сегментации. Сведения о товарах также можно выводить в письмо из [товарного каталога](https://docs.sendsay.ru/ecom/product-catalog/). Для корректного отображения товаров из каталога в письмах важно, чтобы id товара в событии совпадал с id в YML-файле каталога товаров.

Проверить поступление событий в систему можно в разделе **Продажи → Просмотр событий** с фильтрацией по нужному событию. Актуальную корзину можно посмотреть в [карточке подписчика](https://docs.sendsay.ru/ecom/ecom-triggers/#как-посмотреть-историю-событий-для-конкретного-подписчика):

![Subscription card](/img/automations/triggers/abandoned-cart/subscription-card.png)

[Инструкция по настройке событий корзины](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#действия-с-корзиной)

Настройка передачи события **Заказ** необходима для остановки сценария: если пользователь оформит заказ, сценарий брошенной корзины прервётся, и клиент не будет получать письма с напоминанием о забытых товарах.

Рекомендуемые поля в событии:

| Имя                |                                                     Описание                                                     |  Тип данных  |               Комментарий               |
| :----------------- | :--------------------------------------------------------------------------------------------------------------: | :----------: | :-------------------------------------: |
| transaction_id     |                                                    id заказа                                                     |    String    |               обязательно               |
| transaction_status | статус заказа ([возможные статусы](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#статусы-заказа)) |    Int64     |               обязательно               |
| transaction_dt     |                                              дата оформления заказа                                              |   DateTime   |               обязательно               |
| transaction_sum    |                                                   сумма заказа                                                   | Decimal64(2) |               обязательно               |
| items              |                                                  состав заказа                                                   |    Array     |                                         |
| id                 |                                                    id товара                                                     |    String    |               обязательно               |
| qnt                |                                                    количество                                                    |    Int64     |               обязательно               |
| price              |                                                       цена                                                       | Decimal64(2) |               обязательно               |
| name               |                                                 название товара                                                  |    String    |                                         |
| category           |                                                название категории                                                |    String    |                                         |
| category_id        |                                                   id категории                                                   |    Int64     | рекомендуется для товарных рекомендаций |
| vendor             |                                                  производитель                                                   |    String    |                                         |
| cp1…cp20           |                                                произвольное поле                                                 |    String    |  для дополнительных параметров товара   |

Полный перечень возможных параметров и тип данных указан в [инструкции](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#набор-доступных-полей).

Все заказы будут храниться в базе и доступны в [карточке подписчика](https://docs.sendsay.ru/ecom/ecom-triggers/#как-посмотреть-историю-событий-для-конкретного-подписчика):

![Order](/img/automations/triggers/abandoned-cart/order.png)

[Инструкция по настройке события Заказ](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#действия-с-заказом)

</Details>

## Как подключить сценарий

В Sendsay есть готовый сценарий для отправки писем о брошенной корзине с предустановленной логикой и готовыми шаблонами писем. Чтобы его подключить:

1. Перейдите в раздел **Продажи → Сценарии**, выберите сценарий **Брошенная корзина** и нажмите «Подключить».
2. Нажмите «Просмотр» и откройте сценарий. Перейдите во вкладку **Настройки**.
3. На шаге **Письмо 1** нажмите «Редактировать» и [отредактируйте шаблон письма](https://docs.sendsay.ru/ecom/ecom-triggers/#1-отредактируйте-письмо).
4. [Протестируйте отображение товаров](https://docs.sendsay.ru/ecom/ecom-triggers/#2-посмотрите-письмо-подставив-данные-подписчика) в письме с помощью email-адреса подписчика с заполненной корзиной.
5. На шаге **Время** [укажите время задержки](https://docs.sendsay.ru/ecom/ecom-triggers/#3-настройте-время-задержки-отправки) отправки.
6. При необходимости добавьте в сценарий [до 5 писем](https://docs.sendsay.ru/ecom/ecom-triggers/#4-добавьте-другие-письма-опционально).
7. [Активируйте](https://docs.sendsay.ru/ecom/ecom-triggers/#как-активировать-сценарий) сценарий.

Ничего дополнительно настраивать не нужно — вам необходимо только подготовить дизайн писем. Вы можете использовать готовые шаблоны писем, где уже настроен автоматический вывод товаров. Шаблоны писем и товарных блоков доступны в разделе **Контент → Название сайта** после подключения сценария. Также вы можете использовать свой шаблон письма: для этого [добавьте в вёрстку правила вывода товаров](https://docs.sendsay.ru/ecom/ecom-proscript/#брошенная-корзина).

Чтобы стимулировать покупку, расскажите в письме об ограниченном количестве товара или предложите какой-то бонус: например, бесплатную доставку или персональный промокод. Ограниченное по времени предложение сработает на эффект срочности. Добавьте призыв к действию, отражающий суть письма и его цель. Обычно это кнопка для перехода в собранную корзину — чтобы пользователь мог сразу завершить покупку.

Если вам нужна помощь с настройкой сценария, <SupportLink>напишите в чат поддержки</SupportLink>: наша команда поможет с настройкой событий и тестированием сценариев, а также с запуском необходимых механик.
