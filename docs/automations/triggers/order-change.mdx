---
sidebar_position: 5
sidebar_label: 'Заказ изменен'
description: Письмо помогает проинформировать клиентов об изменениях в заказе.
---

import Details from '@theme/Details';
import SupportLink from '@site/src/components/SupportLink';

# Заказ изменен

Заказ изменен — это механика автоматической коммуникации с покупателями, которая помогает проинформировать клиентов об изменениях в заказе. Такое письмо приходит сразу после поступления в Sendsay информации об обновлении заказа.

Отправить письмо об изменении заказа можно двумя способами:

- через готовый сценарий **Заказ изменен** в [платной версии](https://docs.sendsay.ru/ecom/how-to-connect-ecom/#возможности-версий) Sendsay Продажи,
- через [Sendsay API](https://sendsay.ru/api/api.html#Отправить-выпуск) с подстановкой в шаблон всех данных заказа.

:::note Как это работает в сценарии
_В базе есть оформленный заказ → в систему поступает событие Обновление заказа → событие запускает автоматический сценарий → сценарий сразу отправляет письмо с данными заказа_

Например, статус заказа изменился с «Оплачен» на «Передан в доставку». В этот момент со стороны сайта или CRM в Sendsay приходит событие об обновлении заказа и его новый статус. Сразу после этого сработает триггер, и клиент получит письмо с данными заказа.
:::

Главная задача такого письма — своевременно проинформировать покупателя об изменениях в заказе. Это могут быть, например, изменения статуса, состава или доставки заказа. Рассылки о заказах открывают чаще других: используйте это, чтобы добавить призыв к действию и продолжить общение с клиентом, повысить лояльность, стимулировать повторные продажи и просто выделиться среди конкурентов.

Для запуска сценария **Заказ изменен** необходимо:

1. В разделе **Продажи** [подключить сайт онлайн-магазина](https://docs.sendsay.ru/ecom/how-to-connect-ecom/#как-подключить-сайт-кмодулю).
2. [Установить на сайт скрипт отслеживания](https://docs.sendsay.ru/ecom/how-to-connect-ecom/#2-настройте-передачу-данных-ссайта-вsendsay).
3. Настроить передачу события [_Заказ_](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#действия-с-заказом) и [_Обновление заказа_](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#добавление-данных-через-sendsay-api).
4. [Подключить сценарий](#как-подключить-сценарий) в разделе **Продажи → Сценарии**.
5. Отредактировать шаблон письма.
6. Активировать сценарий.

:::tip Важно
Для настройки передачи событий необходимы навыки программирования. Обратитесь к разработчику вашего сайта, если не обладаете такими навыками.
:::

<Details summary='Настройка передачи событий'>

Настройка передачи событий _Заказ_ и _Обновление заказа_ — обязательный шаг для запуска сценария. Вы можете настроить передачу события _Заказ_ с сайта, либо через Sendsay API. Обновление заказа передается по API.

[Как передавать данные через Sendsay API](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#добавление-данных-через-sendsay-api)

Рекомендуемые поля для передачи события [_Заказ_](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#действия-с-заказом) с сайта:

| Имя                |                                                     Описание                                                     |  Тип данных  |               Комментарий               |
| :----------------- | :--------------------------------------------------------------------------------------------------------------: | :----------: | :-------------------------------------: |
| transaction_id     |                                                    id заказа                                                     |    String    |               обязательно               |
| transaction_status | статус заказа ([возможные статусы](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#статусы-заказа)) |    Int64     |               обязательно               |
| transaction_dt     |                                              дата оформления заказа                                              |   DateTime   |               обязательно               |
| transaction_sum    |                                                   сумма заказа                                                   | Decimal64(2) |               обязательно               |
| items              |                                                  состав заказа                                                   |    Array     |                                         |
| id                 |                                                    id товара                                                     |    String    |               обязательно               |
| qnt                |                                                    количество                                                    |    Int64     |               обязательно               |
| price              |                                                       цена                                                       | Decimal64(2) |               обязательно               |
| name               |                                                 название товара                                                  |    String    |                                         |
| category           |                                                название категории                                                |    String    |                                         |
| category_id        |                                                   id категории                                                   |    Int64     | рекомендуется для товарных рекомендаций |
| vendor             |                                                  производитель                                                   |    String    |                                         |
| cp1…cp20           |                                                произвольное поле                                                 |    String    |  для дополнительных параметров товара   |

Полный перечень возможных параметров и тип данных указан в [инструкции](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#набор-доступных-полей).

Все заказы будут храниться в базе и доступны в [карточке подписчика](https://docs.sendsay.ru/ecom/ecom-triggers/#как-посмотреть-историю-событий-для-конкретного-подписчика):

![Order](/img/automations/triggers/abandoned-cart/order.png)

[Инструкция по настройке события Заказ](https://docs.sendsay.ru/ecom/how-to-configure-data-transfer/#действия-с-заказом)

</Details>

## Как подключить сценарий

В Sendsay есть готовый сценарий для отправки писем об изменениях в заказе с предустановленной логикой и готовыми шаблонами писем. Чтобы его подключить:

1. Перейдите в раздел **Продажи → Сценарии**, выберите сценарий **Заказ изменен** и нажмите «Подключить».
2. Нажмите «Просмотр» и откройте сценарий. Перейдите во вкладку **Настройки**.
3. На шаге **Письмо 1** нажмите «Редактировать» и [отредактируйте шаблон письма](https://docs.sendsay.ru/ecom/ecom-triggers/#1-отредактируйте-письмо).
4. [Активируйте](https://docs.sendsay.ru/ecom/ecom-triggers/#как-активировать-сценарий) сценарий.
5. Данные заказа передаются в специальные параметры сценария, поэтому протестировать отображение данных можно только через запуск триггера. <SupportLink>Напишите в чат поддержки</SupportLink>, и мы включим режим тестирования для ваших адресов.

Ничего дополнительно настраивать не нужно — вам необходимо только подготовить дизайн письма. Вы можете использовать готовый шаблон письма с данными заказа, где уже настроен автоматический вывод товаров. Шаблоны писем и товарных блоков можно посмотреть в разделе **Контент → Название сайта** после подключения сценария. Также вы можете использовать свой шаблон письма: для этого [добавьте в вёрстку правила вывода заказа](https://docs.sendsay.ru/ecom/ecom-proscript/#заказ-изменен).

Чтобы стимулировать повторные покупки, предложите клиенту в письме какой-то бонус: например, скидку на следующую покупку. Проявите заботу в письме: посоветуйте, как ухаживать за товаром, чтобы он дольше прослужил, или укажите способы связи с компанией для решения любых возникших вопросов.

Если вам нужна помощь с настройкой сценария, <SupportLink>напишите в чат поддержки</SupportLink>: наша команда поможет с настройкой событий и тестированием сценариев, а также с запуском необходимых механик.
