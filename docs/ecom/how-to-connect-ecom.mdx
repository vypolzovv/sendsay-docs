---
sidebar_position: 1
sidebar_label: 'Как подключить'
---

import howToConnectSite from '/img/ecom/how-to-connect-ecom/how-to-connect-the-site1.png';
import eventFilter from '/img/ecom/how-to-connect-ecom/event-filter.png';

# Модуль Продажи: что это и как подключить

Модуль **Продажи** — это решение для автоматизации онлайн-продаж. Модуль позволяет отслеживать поведение пользователей на&nbsp;сайте (события) и&nbsp;создавать сценарии, которые помогают вернуть подписчиков на&nbsp;сайт: Брошенную корзину, Брошенную категорию, Брошенный просмотр и&nbsp;другие.

Это решение подойдёт онлайн-магазинам для реализации любых товаров и&nbsp;услуг. Для отслеживания поведения и&nbsp;действий пользователей на&nbsp;сайте необходимо настроить передачу данных об&nbsp;их&nbsp;активностях.

## Возможности версий

Модуль Продажи доступен в&nbsp;двух версиях: с&nbsp;полной и&nbsp;ограниченной функциональностью. Ниже представлена таблица&nbsp;&mdash; с&nbsp;её&nbsp;помощью вы&nbsp;сможете определить, какая версия модуля подойдёт для решения маркетинговых задач вашего бизнеса.

|                                     Возможности                                      |                                                                                             «Продажи Старт»                                                                                              |                                                                «Продажи»                                                                |
| :----------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------------------------: |
|                                  Подключение модуля                                  |                                                          Без дополнительной платы на&nbsp;любом платном тарифе линеек Рассылки и&nbsp;Маркетинг                                                          |                                 За дополнительную месячную плату на&nbsp;тарифах Маркетинг от&nbsp;М10                                  |
|                               Добавление каталога YML                                |                                                                                                    +                                                                                                     |                                                                    +                                                                    |
|                         Передача клиентских данных в Sendsay                         |                                                                                             Без ограничений                                                                                              |                                                             Без ограничений                                                             |
|                                   Готовые сценарии                                   |                                  Брошенная корзина<br/>(1 письмо в серии)<br/>Брошенный просмотр<br/>(1 письмо в серии)<br/>Брошенная категория<br/>(1 письмо в серии)                                   | Брошенная корзина<br/>(до 5 писем в серии)<br/>Брошенный просмотр<br/>(1 письмо в серии)<br/>Брошенная категория<br/>(1 письмо в серии) |
|                   Хранение и&nbsp;использование клиентских данных                    |                                                                                        За последние 48&nbsp;часов                                                                                        |                                                             Без ограничений                                                             |
|                 Создание сегментов на&nbsp;основе клиентских данных                  | Создание сегментов на&nbsp;основе данных за&nbsp;последние 48&nbsp;часов. Для&nbsp;условий недоступны события: Поиск, Добавление в&nbsp;избранное, Предварительный заказ, Товар появился, Изменение цены |                                                             Без ограничений                                                             |
|                     Статистика по&nbsp;заказам для&nbsp;сценария                     |                                                                                     За&nbsp;последние 48&nbsp;часов                                                                                      |                                                          Без&nbsp;ограничений                                                           |
|        Статистика по&nbsp;заказам в&nbsp;отчёте выпуска и&nbsp;в&nbsp;шаблоне        |                                                                                     За&nbsp;последние 48&nbsp;часов                                                                                      |                                                          Без&nbsp;ограничений                                                           |
|                      Блок товарных рекомендаций в&nbsp;письмах                       |                                                                                                   Нет                                                                                                    |                                                          Без&nbsp;ограничений                                                           |
| Статистика по&nbsp;заказам (количество и&nbsp;сумма) в&nbsp;сводной таблице рассылок |                                                                                                   Нет                                                                                                    |                                                          Без&nbsp;ограничений                                                           |

:::tip Важно
Если вы&nbsp;используете бесплатный тариф, для подключения версии модуля &laquo;Продажи Старт&raquo; необходимо перейти на&nbsp;любой платный тариф линеек Рассылки или Маркетинг.

Полная версия модуля &laquo;Продажи&raquo; доступна за&nbsp;дополнительную ежемесячную плату для тарифов продукта Маркетинг от&nbsp;10&nbsp;000&nbsp;подписчиков. Если в&nbsp;вашей базе контактов меньше подписчиков, но&nbsp;вы хотите воспользоваться возможностями модуля, необходимо перейти на&nbsp;тариф М10. Чтобы приобрести модуль, напишите в&nbsp;техподдержку.
:::

## Как подключить сайт к&nbsp;модулю

**Сайт**&nbsp;&mdash; это ваш онлайн-магазин, где вы&nbsp;предлагаете товары или услуги. Чтобы настроить передачу данных о&nbsp;действиях клиентов на&nbsp;сайте в&nbsp;Sendsay, сперва нужно подключить сайт к&nbsp;модулю. Для этого:

### 1. Добавьте сайт в&nbsp;Sendsay

Перейдите в&nbsp;раздел **Продажи** в&nbsp;боковом меню и&nbsp;кликните по&nbsp;кнопке &laquo;Подключить сайт&raquo;:

![How to connect the site](/img/ecom/how-to-connect-ecom/how-to-connect-the-site.png)

В&nbsp;появившемся окне укажите адрес сайта и&nbsp;нажмите &laquo;Подключить&raquo;:

<p align="center">
  <img width="50%" src={howToConnectSite} alt="How to connect site" />
</p>

Далее переходите к&nbsp;настройке, нажав соответствующую кнопку.

### 2. Настройте передачу данных с&nbsp;сайта в&nbsp;Sendsay

На&nbsp;странице сайта выберите вкладку **Настройка**, скопируйте специальный код и&nbsp;отправьте его разработчикам:

![How to configure data transfer](/img/ecom/how-to-connect-ecom/how-to-configure-data-transfer.png)

Разработчикам необходимо установить код на&nbsp;все страницы сайта, с&nbsp;которых будут отслеживаться данные о&nbsp;действиях пользователей — требования указаны в&nbsp;[общих настройках](https://docs.sendsay.ru/ecom/how-to-connect-ecom#общие-настройки-для-сайта-магазина). Чтобы данные поступали в&nbsp;Sendsay, также нужно настроить функции передачи данных о&nbsp;действиях пользователей.

Для правильного отображения товаров в&nbsp;рассылках рекомендуем для всех событий передавать параметры:

- `"id"` — id товара. Желательно, чтобы id совпадал с&nbsp;тем, который есть в&nbsp;YML-файле каталога товаров.
- `"name"` — название товара.
- `"picture"` — ссылка на&nbsp;картинку. Проверьте, чтобы передавался абсолютный URL картинки.
- `"price"` — цена товара.
- `"url"` — ссылка на&nbsp;товар. Проверьте, чтобы передавался абсолютный URL.

### 3. Подключите каталог товаров

Каталог товаров необходим для запуска триггерного сценария Брошенная категория, а&nbsp;также если вы&nbsp;планируете размещать в&nbsp;своих рассылках актуальные товарные рекомендации&nbsp;&mdash; чтобы в&nbsp;письма подгружались товары из&nbsp;каталога.

[Как подключить каталог товаров](https://docs.sendsay.ru/ecom/product-catalog)

После подключения онлайн-магазина к&nbsp;модулю Продажи рекомендуем протестировать передачу данных, а&nbsp;уже после&nbsp;&mdash; настраивать триггерные сценарии и&nbsp;шаблоны.

## События сайта

События возникают в&nbsp;результате действий подписчиков на&nbsp;сайте онлайн-магазина: например, когда пользователи просматривали товары или категорию, добавляли товары в&nbsp;корзину и&nbsp;прочее. Их&nbsp;можно посмотреть во&nbsp;вкладке **Просмотр событий** на&nbsp;странице магазина.

:::tip Важно
Просмотр событий будет доступен после того, как данные начнут поступать в&nbsp;Sendsay. Поэтому в&nbsp;самом начале важно правильно настроить передачу данных.
:::

Какие события можно передавать с&nbsp;сайта в&nbsp;Sendsay:

- Просмотр товара,
- Просмотр категории,
- Обновление корзины,
- Очистка корзины,
- Поиск товара,
- Заказ оформлен,
- Подписка на&nbsp;изменение стоимости товара,
- Подписка на&nbsp;появление товара в&nbsp;продаже,
- Добавление товара в&nbsp;избранное,
- Предварительный заказ товара.

Также во&nbsp;вкладке **Просмотр событий** отображаются стартовые события сценариев, которые сработали на&nbsp;стороне Sendsay:

- запуск события &laquo;Брошенная корзина&raquo;&nbsp;&mdash; когда пользователь положил товар в&nbsp;корзину и&nbsp;ушёл с&nbsp;сайта, не&nbsp;сделав заказ;
- запуск события &laquo;Брошенный просмотр&raquo;&nbsp;&mdash; если пользователь просматривал карточку товара, но&nbsp;не&nbsp;положил товар в&nbsp;корзину и&nbsp;не&nbsp;сделал заказ;
- запуск события &laquo;Брошенная категория&raquo;&nbsp;&mdash; в&nbsp;случае, когда пользователь просматривал категорию, но&nbsp;не&nbsp;перешёл в&nbsp;карточку товара и&nbsp;не&nbsp;сделал заказ.

По&nbsp;умолчанию триггерные события наступают через 30&nbsp;минут после последнего действия пользователя на&nbsp;сайте. Время отправки писем по&nbsp;сценарию можно будет изменить в&nbsp;настройках сценария.

### События, завершающие сценарий

В&nbsp;ситуации, когда пользователь участвует в&nbsp;сценарии о&nbsp;брошенной корзине и&nbsp;решает оформить заказ, необходимо, чтобы сценарий для него завершился принудительно. Для этого важно настроить передачу событий, при наступлении которых сценарий завершится автоматически:

- **Заказ оформлен** и&nbsp;**Очистка корзины** для Брошенной корзины;
- **Заказ оформлен** и&nbsp;**Товар добавлен в&nbsp;корзину** для завершения сценариев Брошенный просмотр и&nbsp;Брошенная категория.

Сценарий автоматически завершится также при запуске других сценариев:

- Брошенный просмотр завершится для подписчиков, которые попали в&nbsp;сценарий **Брошенная корзина**,
- Брошенная категория завершится для тех участников, кто попадёт в&nbsp;сценарий **Брошенная корзина** или **Брошенный просмотр**.

## Как посмотреть историю событий сайта

В&nbsp;разделе **Продажи &rarr; Просмотр событий** в&nbsp;одной таблице собраны контакты, события на&nbsp;сайте и&nbsp;время, когда эти события произошли:

![Event view](/img/ecom/how-to-connect-ecom/event-view.png)

В&nbsp;столбце **Контакт** выводится список пользователей:

- контакты из&nbsp;базы отображаются как email-адрес;
- анонимные пользователи&nbsp;&mdash; как набор латинских букв и&nbsp;цифр;
- несуществующие или удалённые из&nbsp;базы пользователи изображены в&nbsp;виде иконки привидения.

:::tip Важно
Адреса контактов могут повторяться, ведь один подписчик мог совершить несколько действий (событий) за&nbsp;указанный период.
:::

Над таблицей есть строка поиска&nbsp;&mdash; можно найти конкретного подписчика по&nbsp;его адресу. Ещё список можно отфильтровать по&nbsp;типу контакта, типу события и&nbsp;по&nbsp;периоду. Например, нужно узнать, кто из&nbsp;подписчиков оформлял заказ за&nbsp;последний месяц. Тогда будем действовать так:

<p align="center">
  <img width="50%" src={eventFilter} alt="How to connect site" />
</p>

Во&nbsp;вкладке **Просмотр событий** можно добавить в&nbsp;список или удалить конкретных подписчиков из&nbsp;базы. Для этого выберите нужные контакты, отметив их&nbsp;галочкой слева от&nbsp;адреса контакта. Затем:

- если хотите перенести контакты в&nbsp;список, нажмите &laquo;Добавить в&nbsp;список&raquo; и&nbsp;выберите список;
- если хотите удалить подписчиков, откройте выпадающий список у&nbsp;кнопки &laquo;Добавить в&nbsp;список&raquo; и&nbsp;выберите пункт **Удалить из&nbsp;базы**.
  ![How to delete contacts](/img/ecom/how-to-connect-ecom/how-to-delete-contacts.png)

## Общие настройки для сайта магазина

Для подсчета переходов по ссылкам из письма система использует перелинковку: все ссылки в письме «оборачиваются» в ссылки-редиректы, которые по умолчанию используют домен `link.sendsay.ru`. Если навести курсор на любую ссылку, в левом нижнем углу браузера появится подсказка — на какой адрес планируется переход. Каждая такая ссылка уникальна.

Когда подписчик кликает по ссылке, он переходит сначала на `link.sendsay.ru`, а затем — на исходную ссылку. Так система учитывает переход, и подписчик попадает на нужную страницу.

Для полноценной работы скрипт должен содержать информацию о том, для кого он отправляет событие в Sendsay — эта информация зашифрована в ссылке-редиректе. Для того, чтобы наш скрипт на сайте клиента имел доступ в к полному содержимому ссылки-редиректа, нужно соблюсти условия:

1. Сайт клиента должен открываться через https-протокол.
2. Ссылки для перелинковки должны быть не в домене `link.sendsay.ru`, а в сабдомене сайта, и тоже использовать SSL-сертификат. Это можно сделать двумя способами:

- Делегировать домен нам, прописав в `NS DNS` следующее:

```
IN NS gns194b.sendsay.ru.
IN NS gns194a.sendsay.ru.
IN NS gns195b.sendsay.ru.
IN NS gns195a.sendsay.ru.
```

- Настроить домен самостоятельно, указав в `CNAME`:

```
link.mail.CLIENT.TLD CNAME link.sendsay.ru *.link.mail.CLIENT.TLD CNAME link.sendsay.ru
```

После настройки можно проверить домен по ссылке. Если всё настроено правильно, необходимо «повесить» на этот домен SSL-сертификат.

В случае, если ссылки-редиректы будут идти через `link.sendsay.ru`, то как минимум в Safari наш скрипт не будет получать информацию о подписчике.

**Читайте также:** [Руководство по триггерным сценариям для онлайн-продаж](https://docs.sendsay.ru/ecom/ecom-triggers)
