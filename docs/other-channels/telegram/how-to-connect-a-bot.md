---
sidebar_position: 1
sidebar_label: 'Как подключить бота'
---

import botToken from "/img/other-channels/telegram/how-to-connect-a-bot/how-to-copy-the-token.png";
import connectBot from "/img/other-channels/telegram/how-to-connect-a-bot/how-to-connect-a-bot.gif";
import deleteBot from "/img/other-channels/telegram/how-to-connect-a-bot/how-to-delete-a-bot.png";
import SupportLink from '@site/src/components/SupportLink';

# Как подключить бота в Телеграме

В Sendsay можно отправлять рассылки в Телеграме через бота. Сообщения придут тем подписчикам, которые начали диалог с ботом после его подключения к Sendsay. Бот можно подключить только к одному аккаунту Sendsay, но к одному аккаунту можно подключить неограниченное количество ботов.

## Как перенести подписчиков бота в Sendsay при переезде из другого сервиса рассылок

### 1. Составьте файл с контактами

В качестве контакта в Телеграме используется ID пользователя (это комбинация цифр — отправлять рассылки по нику или номеру телефона нельзя). Айдишники можно скачать в предыдущем сервисе рассылок при переезде в Sendsay, в самом мессенджере их нельзя выгружать.

К контакту можно прикрепить остальную информацию из аккаунта — имя, фамилию и ник. Правила оформления файла для импорта описаны в отдельной статье.

[Как подготовить файл для импорта](https://docs.sendsay.ru/subscribers/import-and-export/how-to-prepare-file-for-import)

### 2. Напишите в службу поддержки

<SupportLink>Напишите в чат поддержки</SupportLink>, что хотите перенести базу подписчиков телеграм-бота в Sendsay, к сообщению приложите файл с контактами.

## Как подключить бота

### 1. Скопируйте токен для доступа к боту в Телеграме

Откройте переписку с ботом @BotFather — это верифицированный бот для создания и управления ботами в Телеграме (поэтому у него есть синяя галочка рядом с именем аккаунта). Если у вас нет бота, создайте его — для этого нажмите /start и следуйте инструкции.

В истории сообщений найдите и скопируйте токен для настройки удалённого доступа — это длинная комбинация из цифр и латинских букв.

<p align="center">
    <img src={botToken} alt="Web push" />
</p>

### 2. Подключите бота к Sendsay

1. Откройте раздел **Подписчики → Telegram** и нажмите на синюю кнопку «Подключить бота».
2. В появившемся окне вставьте токен и нажмите «Подключить».

  <p align="center">
    <img src={connectBot} alt="How to connect a bot" />
  </p>

## Как удалить бота

Откройте раздел **Подписчики → Telegram**. Рядом с ботом откройте выпадающий список и нажмите «Удалить».

<p align="center">
    <img src={deleteBot} alt="How to delete a bot" />
</p>

## Как объединить в&nbsp;карточке подписчика email и&nbsp;контакт в&nbsp;Телеграме

Объединение контактов&nbsp;&mdash; это возможность дополнить анкетные данные подписчика для того, чтобы связываться по&nbsp;еще одному каналу и&nbsp;персонализировать рассылки. Объединить контакты можно тремя способами:

### 1. Добавить ссылку на бот в рассылку

Чтобы объединить email и&nbsp;контакт в&nbsp;Телеграме в&nbsp;одной карточке, нужно чтобы подписчик перешел в&nbsp;бот по&nbsp;специальной ссылке. Когда подписчик перейдет из&nbsp;письма в&nbsp;бот и&nbsp;подпишется на&nbsp;него, контакты свяжутся. Если это произойдет, в&nbsp;карточке подписчика появится отметка о&nbsp;подписке на&nbsp;указанный бот в&nbsp;Телеграме.

![Telegram bot](\img\other-channels\telegram\how-to-connect-a-bot\telegram-bot.jpg) <br/>

Для этого отправьте email-рассылку и&nbsp;добавьте в&nbsp;письмо ссылку с&nbsp;дополнительными параметрами:

```
?start=[% param.issue.id %]-[% param.letter.id %]-[% anketa.member.id %]
```

В&nbsp;итоге ссылка на&nbsp;бот в&nbsp;Телеграме будет выглядеть так:

<!-- prettier-ignore -->
```html
<a
  href="https://t.me/example_bot?start=[% param.issue.id %]-[% param.letter.id %]-[% anketa.member.id %]"
  >Подписаться в Telegram</a
>
```

Вместо `example_bot` впишите название нужного бота.

### 2. Добавить ссылку на бот с указанием email

Если предлагаете подписаться на Телеграм-бота, то можете сформировать ссылку с указанием email (если он вам известен). При формировании ссылки email-адрес и сама ссылка будут отличаться для каждого конкретного подписчика.

<!-- prettier-ignore -->
```html
<a href="https://t.me/example_bot?start=PAYLOAD">Подписаться в Telegram</a>
```

Где `PAYLOAD` &mdash; это закодированная в base64 строка `email=qwerty@mail.ru`. Чтобы её закодировать, необходимо выполнить несколько шагов для каждого конкретного адреса:

1. Перейдите в любой онлайн-кодировщик base64 — например, в [Online Base64 декодер](http://base64.ru/).
2. В поле **Текст → Base64** введите запись `email=qwerty@mail.ru`, где `qwerty@mail.ru` — это email контакта, который хотите объединить с контактом в Телеграме.
3. Скопируйте получившуюся закодированную запись и вставьте её в ссылку вместо `PAYLOAD`.
4. Вместо `example_bot` впишите название нужного бота.

В итоге должна получиться похожая ссылка:

<!-- prettier-ignore -->
```html
<a href="https://t.me/sendsay_bot?start=ZW1haWw9cXdlcnR5QG1haWwucnUg">Подписаться в Telegram</a>
```

При переходе по ссылке пользователь перейдёт в Телеграм-бот. Если в вашей базе контактов есть его email-адрес, то после перехода по ссылке контакт в Телеграме будет добавлен к указанному email как дополнительный контакт.

### 3. Отправить QR-код с ссылкой на бот

Чтобы объединить email и&nbsp;контакт в&nbsp;Телеграме, можно предложить пользователям переходить в&nbsp;бот по&nbsp;QR-коду, размещенному в&nbsp;письме. Для этого добавьте в&nbsp;письмо специальный код:

```
[% tgurl = "https://t.me/example_bot?start=" %]
[% issue = param.issue.id |uri %]
[% letter = param.letter.id |uri %]
[% member = anketa.member.id |uri %]

<img src="[% qr_code(tgurl _ '' _ issue _ '-' _ letter _ '-' _ member) %]" />
```

Вместо `example_bot` впишите название нужного бота.
